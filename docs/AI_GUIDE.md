# AI編集ガイド

このドキュメントは、生成AI（Claude、ChatGPT等）がこのリポジトリを効率的に編集するためのガイドラインです。

## プロジェクト概要

市町村議会の議員情報を収集・管理するプロジェクトです。東京都と埼玉県の市町村を収集済みで、今後他の都道府県にも拡張予定です。

**主な目的:**
1. 全議員の基本情報（氏名、読み、所属）を収集
2. X（旧Twitter）アカウントを可能な限り多く発見・記録
3. データの標準化と品質維持

## ディレクトリ構造

```
City_Council-/
├── data/
│   ├── raw/               # 元データ（HTMLファイル等）
│   │   └── {都道府県コード}_{都道府県名}/  # 都道府県ディレクトリ
│   │       └── {市町村名}/    # 市町村ごとのディレクトリ
│   │           └── YYYYMMDD/  # 取得日ごとのディレクトリ
│   │               └── source.html
│   └── processed/         # 加工済みデータ（JSONファイル）
│       └── {都道府県コード}_{都道府県名}/  # 都道府県ディレクトリ
│           └── 議員リスト_{自治体コード}_{自治体名}.json
├── docs/                  # ドキュメント
├── scripts/               # 各種スクリプト
├── schema/                # JSONスキーマ定義
└── README.md             # プロジェクト説明
```

## 新しい自治体を追加する手順

### 自動化ツールを使う場合（推奨）
```bash
python scripts/add_municipality.py
```
対話形式で必要な情報を入力すると、ディレクトリ作成とHTMLダウンロードが自動化されます。

### 手動で行う場合

#### 1. ディレクトリの作成
```bash
# 東京都の場合
mkdir -p data/raw/13_東京都/{自治体名}/$(date +%Y%m%d)

# 埼玉県の場合
mkdir -p data/raw/11_埼玉県/{自治体名}/$(date +%Y%m%d)
```

### 2. HTMLデータの取得
```bash
curl -s "{公式サイトURL}" -o data/raw/{自治体名}/$(date +%Y%m%d)/source.html
```

### 3. JSONファイルの作成
- ファイル名: `議員リスト_{自治体コード}_{自治体名}.json`
- 保存先: `data/processed/{都道府県コード}_{都道府県名}/`
- フォーマット: 以下の形式に従う

```json
[
  {
    "氏名": "議員名",
    "登録名": "議員名",
    "よみ": "ふりがな",
    "X（旧Twitter）": "https://x.com/account または null",
    "所属": "会派名"
  }
]
```

### 4. README.mdの更新
対応する表に以下の形式で追加：
```markdown
| 自治体名 | 自治体コード | 校正中 | 議員数 | X登録数 | 更新日 | [議員リスト](パス) |
```

## 自治体コードの規則

- 6桁の数字
- 東京都: 13xxxx
- 埼玉県: 11xxxx
- 詳細は `docs/MUNICIPALITY_CODES.md` を参照

## Xアカウント検索のガイドライン

### 自動検索ツールの使用（推奨）

#### 1. 基本検索（単一自治体）
```bash
python scripts/search_x_accounts.py data/processed/13_東京都/議員リスト_132233_武蔵村山市.json
```

#### 2. 強化版検索（並列処理対応）
```bash
# 都道府県一括処理
python scripts/search_x_accounts_v2.py --prefecture data/processed/13_東京都

# ブラウザで検索タブを開く
python scripts/search_x_accounts_v2.py --browser data/processed/11_埼玉県/議員リスト_112089_所沢市.json
```

#### 3. 包括的発見システム（最も高度）
```bash
# 全都道府県の発見計画生成
python scripts/comprehensive_x_discovery.py --all
```

### 手動検索の場合

1. 検索キーワード:
   - `"{議員名}" {市町村}議 site:x.com`（最優先）
   - `{議員名} {自治体名} 議員`
   - `@{読みの最初6文字}`（ユーザー名検索）

2. 確認ポイント:
   - プロフィールに議員であることが明記されている
   - 議会活動に関する投稿がある
   - 同じ自治体の他の議員をフォローしている
   - 公式サイトにリンクが記載されている

詳細は `docs/X_SEARCH_GUIDE.md` を参照

## データ検証

作業完了後、以下のコマンドで検証：
```bash
python scripts/validate_data.py
```

## コミットメッセージの規則

日本語で、以下の形式で記載：
- 新規追加: `{自治体名}の議員リストを追加`
- 更新: `{自治体名}のXアカウント情報を更新`
- 修正: `{自治体名}の{内容}を修正`

## よくある質問

### Q: 議員の読み仮名がわからない場合
A: 公式サイトに記載がない場合は、一般的な読み方を採用し、後で修正可能とする

### Q: 会派情報がない場合
A: "無所属" と記載

### Q: Xアカウントが見つからない場合
A: null のままにして、後で更新

## 注意事項

- 文字コードはUTF-8
- 改行コードはLF
- インデントはスペース2つ
- JSONの最後にカンマを入れない